<script>
    var a = 1;
    function Fun1() {
        var a = 2;
        console.log(this, '^^^^^^', this.a + a);
    }

    function Fun2() {
        var a = 10;
        Fun1();
    }

    Fun2(); // 3

    var Fun3 = function() {
        this.a = 3;
    };

    Fun3.prototype = {
        a: 4
    };

    var fun3 = new Fun3(); // window.a =3
    Fun1.call(fun3); // 3 + 2   5
</script>

<script>
    // 根据十位数分类数组
    let arr = [1, 6, 7, 8, 9, 10, 11, 2, 3, 4, 5, 12, 13];
    function dismension(cval, arr) {
        let result = [],
            lin = [];
        arr = arr.sort(function(a, b) {
            return a - b;
        });
        arr.map((item, index) => {
            // let eq = Math.floor(item / cval)
            lin.push(item);
            if ((index + 1) % cval === 0 || index === arr.length - 1) {
                result.push(lin);
                lin = [];
            }
        });
        return result;
    }

    console.log('根据十位数分类数组', dismension(5, arr));
</script>

<script>
    // 去掉数组交集
    let arr1 = [1, 2, 3];
    let arr2 = [2, 2, 3, 4];
    let newArr = [...arr1, ...arr2];
    function uniq(newArr) {
        let result = [];
        newArr = newArr.sort();
        newArr.map(item => {
            if (result.includes(item)) {
                newArr = newArr.filter(ele => ele !== item);
            } else {
                result.push(item);
            }
        });
        return newArr;
    }
    console.log('去掉数组交集', uniq(newArr));
    // result   [1,3]
</script>

<script>
    // console.log('打印')
    // async function getFoo() {
    //     console.log(1);
    //     return "foo";
    // }

    // async function getBar() {
    //     console.log(2);
    //     return "bar";
    // }

    // async function wrap() {
    //     let [foo, bar] = await Promise.all([getFoo(), getBar()]);
    //     console.log(foo, bar, 3);
    // }

    // (async function wrap2(){
    //     await wrap();
    //     console.log(4)
    // })();

    // wrap2();

    // console.log(5);
</script>

<script>
    /*
        封装一个方法，
        'a[2[2]]b[23]'，转换成22个a+34个b的字符串
        字符串不定，也可以是'c[3[4]d[16]'，转换成34和c，16个d
    */
    let str = 'a[1[2]]b[6]';
    let str1 = str.replace(/\[|]/g, '');
    let str2 = str1.replace(/([a-z])(\d+)/gi, (...arg) => {
        let [content, $1, $2] = arg;
        let str = '';
        for (let i = 0; i < Number($2); i++) {
            str += $1;
        }
        return str;
    });
    console.log(str2, 'jjhg');
    // console.log(str1);
    // str1.map(item => {
    //     if (Number(item)) {
    //         console.log(item);
    //     }
    // });
</script>

<script>
    // 多维数组转一维 数组扁平化
    let duoWei = [1, 2, [3, 4, [5, 8, [6, 9]]], [7, 6, [11, 68]]];
    // duoWei.flat(Infinity)
    while (duoWei.some(item => Array.isArray(item))) {
        duoWei = [].concat(...duoWei);
    }
    console.log('数组扁平化', duoWei);
</script>

<script>
    // 请写出弹出值，并解释为什么
    console.log('请写出弹出值，并解释为什么');
    function funa() {
        var a = 5;
        function a() {}
        console.log(a);
        function b() {}
        b = 6;
        console.log(b);
        var c = (d = b);
        console.log(d);
        console.log(b);
        console.log(c);
    }
    funa();
</script>

<script>
    // **** 写出以下输出值，并解释为什么 ****
    console.log('写出以下输出值，并解释为什么');
    this.a = 20;
    var test = {
        a: 40,
        init: () => {
            console.log(this.a);
            function go() {
                // this.a = 60
                console.log(this.a);
            }
            go.prototype.a = 50;
            return go;
        }
    };
    var p = test.init();
    p();
    new (test.init())();
</script>

<script>
    // 请在下面写出js面向对象的混合式继承，并写出ES6版本的继承
    // 要求：汽车是父类，Cruze 是子类
    // 父类有颜色、价格属性、有售卖的方法。
    // Cruze子类实现父类颜色是红色，价格是 140000，售卖方法实现输出如下
    // 将 红色 的Cruze卖给了小王价格是14万
    class Car {
        constructor(color, price) {
            this.color = color;
            this.price = price;
        }
        sell() {
            console.log(
                `将${this.color}的Cruze卖给了小王价格是${this.price}万`
            );
        }
    }
    class Cruze extends Car {
        constructor(color, price) {
            super();
            super.color = color;
            super.price = price;
        }
    }
    let CruzeNew = new Cruze('红色', '140000');
    CruzeNew.sell();
</script>

<script>
    console.log('学生等级');
    // 用一句话算出0-100之间学生的学生等级，如90-100输出为1等生
    // 80-90为2等生以此类推。不允许使用if switch等。
    for (let i = 0; i < 100; i++) {
        i % 10 === 0 ? console.log(`${i / 10 + 1}等生`) : null;
    }
</script>

<script>
    //
</script>

<script>
    // 发布订阅
    // 防抖、节流
    // 循环命名
    // for1: for(let i = 0; i<5;i++){
    //     console.log(i)
    //     if(i === 2){
    //         break for1
    //     }
    // }
    // with(document)
    // {title = '哈哈'}
</script>

<script>
    function foo() {
        console.log(this.a);
    }

    var a = 2;
    var o = {
        a: 3,
        foo: foo
    };
    var p = {
        a: 4
    };
    o.foo(); //3
    (p.foo = o.foo)(); // 2
</script>

<script>
    const res = {
        code: 0,
        data: {
            lines: '20路,301路,5路,地铁5号线,机场大巴线,107路,机场快轨',
            lineids: 'lzbd,lwes,lxid,lwic,lwdf,ldfx,loin',
            linedetails: {
                lwdf: {
                    name: '机场大巴线'
                },
                lwes: {
                    name: '301路'
                },
                lwic: {
                    name: '地铁5号线'
                },
                ldfx: {
                    name: '107路'
                },
                lzbd: {
                    name: '20路'
                },
                lxid: {
                    name: '5路'
                },
                loin: {
                    name: '机场快轨'
                }
            }
        }
    };

    // const data = parse(res)

    // data经过parse函数转化后，变成以下结构
</script>

<script>
    let a = '我是a';
    let b = '我是b';

    Object.defineProperty(String.prototype, 'name', {
        get: function() {
            return this.valueOf();
        }
    });

    console.log(a.name, b.name);
</script>
